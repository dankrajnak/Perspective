function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t,n){function i(e,t){return typeof e===t}function r(e){var t=C.className,n=w._config.classPrefix||"";if(b&&(t=t.baseVal),w._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}w._config.enableClasses&&(t+=" "+n+e.join(" "+n),b?C.className.baseVal=t:C.className=t)}function s(e,t){if("object"==typeof e)for(var n in e)T(e,n)&&s(n,e[n]);else{var i=(e=e.toLowerCase()).split("."),o=w[i[0]];if(2==i.length&&(o=o[i[1]]),void 0!==o)return w;t="function"==typeof t?t():t,1==i.length?w[i[0]]=t:(!w[i[0]]||w[i[0]]instanceof Boolean||(w[i[0]]=new Boolean(w[i[0]])),w[i[0]][i[1]]=t),r([(t&&0!=t?"":"no-")+i.join("-")]),w._trigger(e,t)}return w}function o(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):b?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function a(){var e=t.body;return e||(e=o(b?"svg":"body"),e.fake=!0),e}function u(e,n,i,r){var s,u,l,c,f="modernizr",h=o("div"),d=a();if(parseInt(i,10))for(;i--;)l=o("div"),l.id=r?r[i]:f+(i+1),h.appendChild(l);return s=o("style"),s.type="text/css",s.id="s"+f,(d.fake?d:h).appendChild(s),d.appendChild(h),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(t.createTextNode(e)),h.id=f,d.fake&&(d.style.background="",d.style.overflow="hidden",c=C.style.overflow,C.style.overflow="hidden",C.appendChild(d)),u=n(h,e),d.fake?(d.parentNode.removeChild(d),C.style.overflow=c,C.offsetHeight):h.parentNode.removeChild(h),!!u}function l(e,t){return!!~(""+e).indexOf(t)}function c(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function f(t,n,i){var r;if("getComputedStyle"in e){r=getComputedStyle.call(e,t,n);var s=e.console;null!==r?i&&(r=r.getPropertyValue(i)):s&&s[s.error?"error":"log"].call(s,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else r=!n&&t.currentStyle&&t.currentStyle[i];return r}function h(t,i){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(c(t[r]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];r--;)s.push("("+c(t[r])+":"+i+")");return s=s.join(" or "),u("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"==f(e,null,"position")})}return n}function d(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function p(e,t,r,s){function a(){c&&(delete O.style,delete O.modElem)}if(s=!i(s,"undefined")&&s,!i(r,"undefined")){var u=h(e,r);if(!i(u,"undefined"))return u}for(var c,f,p,v,_,m=["modernizr","tspan","samp"];!O.style&&m.length;)c=!0,O.modElem=o(m.shift()),O.style=O.modElem.style;for(p=e.length,f=0;p>f;f++)if(v=e[f],_=O.style[v],l(v,"-")&&(v=d(v)),O.style[v]!==n){if(s||i(r,"undefined"))return a(),"pfx"!=t||v;try{O.style[v]=r}catch(e){}if(O.style[v]!=_)return a(),"pfx"!=t||v}return a(),!1}function v(e,t){return function(){return e.apply(t,arguments)}}function _(e,t,n){var r;for(var s in e)if(e[s]in t)return!1===n?e[s]:(r=t[e[s]],i(r,"function")?v(r,n||t):r);return!1}function m(e,t,n,r,s){var o=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+B.join(o+" ")+o).split(" ");return i(t,"string")||i(t,"undefined")?p(a,t,r,s):(a=(e+" "+q.join(o+" ")+o).split(" "),_(a,t,n))}function g(e,t,i){return m(e,n,n,t,i)}var y=[],A={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},w=function(){};w.prototype=A,w=new w;var x=[],C=t.documentElement,b="svg"===C.nodeName.toLowerCase(),S="Moz O ms Webkit",q=A._config.usePrefixes?S.toLowerCase().split(" "):[];A._domPrefixes=q;var k=A._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];A._prefixes=k;var T;!function(){var e={}.hasOwnProperty;T=i(e,"undefined")||i(e.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),A._l={},A.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),w.hasOwnProperty(e)&&setTimeout(function(){w._trigger(e,w[e])},0)},A._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)},0),delete this._l[e]}},w._q.push(function(){A.addTest=s});var P=function(){var e=!("onblur"in t.documentElement);return function(t,i){var r;return!!t&&(i&&"string"!=typeof i||(i=o(i||"div")),t="on"+t,!(r=t in i)&&e&&(i.setAttribute||(i=o("div")),i.setAttribute(t,""),r="function"==typeof i[t],i[t]!==n&&(i[t]=n),i.removeAttribute(t)),r)}}();A.hasEvent=P;var E=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return u("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();A.mq=E;A.prefixedCSSValue=function(e,t){var n=!1,i=o("div").style;if(e in i){var r=q.length;for(i[e]=t,n=i[e];r--&&!n;)i[e]="-"+q[r]+"-"+t,n=i[e]}return""===n&&(n=!1),n};var B=A._config.usePrefixes?S.split(" "):[];A._cssomPrefixes=B;var L={elem:o("modernizr")};w._q.push(function(){delete L.elem});var O={style:L.elem.style};w._q.unshift(function(){delete O.style}),A.testAllProps=m,A.testAllProps=g,A.testProp=function(e,t,i){return p([e],n,t,i)},A.testStyles=u,w.addTest("customelements","customElements"in e),w.addTest("history",function(){var t=navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")||"file:"===location.protocol)&&(e.history&&"pushState"in e.history)}),w.addTest("pointerevents",function(){var e=!1,t=q.length;for(e=w.hasEvent("pointerdown");t--&&!e;)P(q[t]+"pointerdown")&&(e=!0);return e}),w.addTest("postmessage","postMessage"in e),w.addTest("webgl",function(){var t=o("canvas"),n="probablySupportsContext"in t?"probablySupportsContext":"supportsContext";return n in t?t[n]("webgl")||t[n]("experimental-webgl"):"WebGLRenderingContext"in e});var z=!1;try{z="WebSocket"in e&&2===e.WebSocket.CLOSING}catch(e){}w.addTest("websockets",z),w.addTest("cssanimations",g("animationName","a",!0)),function(){w.addTest("csscolumns",function(){var e=!1,t=g("columnCount");try{(e=!!t)&&(e=new Boolean(e))}catch(e){}return e});for(var e,t,n=["Width","Span","Fill","Gap","Rule","RuleColor","RuleStyle","RuleWidth","BreakBefore","BreakAfter","BreakInside"],i=0;i<n.length;i++)e=n[i].toLowerCase(),t=g("column"+n[i]),("breakbefore"===e||"breakafter"===e||"breakinside"==e)&&(t=t||g(n[i])),w.addTest("csscolumns."+e,t)}(),w.addTest("flexbox",g("flexBasis","1px",!0)),w.addTest("picture","HTMLPictureElement"in e),w.addAsyncTest(function(){var e,t,n,i=o("img"),r="sizes"in i;!r&&"srcset"in i?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){s("sizes",2==i.width)},i.onload=n,i.onerror=n,i.setAttribute("sizes","9px"),i.srcset=e+" 1w,"+t+" 8w",i.src=e):s("sizes",r)}),w.addTest("srcset","srcset"in o("img")),w.addTest("webworkers","Worker"in e),function(){var e,t,n,r,s,o,a;for(var u in y)if(y.hasOwnProperty(u)){if(e=[],(t=y[u]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=i(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)o=e[s],1===(a=o.split(".")).length?w[a[0]]=r:(!w[a[0]]||w[a[0]]instanceof Boolean||(w[a[0]]=new Boolean(w[a[0]])),w[a[0]][a[1]]=r),x.push((r?"":"no-")+a.join("-"))}}(),r(x),delete A.addTest,delete A.addAsyncTest;for(var D=0;D<w._q.length;D++)w._q[D]();e.Modernizr=w}(window,document);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),PerspectiveSquare=function(){function e(t,n,i){_classCallCheck(this,e),this._canvas=t,this._context=this._canvas.getContext("2d"),this._originalSquare=[n,[n[0]+i,n[1]],[n[0]+i,n[1]+i],[n[0],n[1]+i]],this._squareCenter=[n[0]+i/2,n[1]+i/2],this._square=this._originalSquare.map(function(e){return e.slice()}),this.depth=100,this.lineColor="black",this.background="white",this.lineWeight=3,this.maxSquareDisplacement=60}return _createClass(e,[{key:"drawSquare",value:function(e){var t=this,n=this._canvas.width,i=this._canvas.height;this._context.clearRect(0,0,n,i,this.background),this._context.fillStyle=this.background,this._context.fillRect(0,0,n,i),this._context.lineWidth=this.lineWeight;var r=[0,0],s=Math.min(this._euclideanDistance(this._squareCenter,e),this.maxSquareDisplacement);(r=this._distanceDownLine(this._squareCenter,e,s))[0]-=this._squareCenter[0],r[1]-=this._squareCenter[1];for(var o=0;o<4;o++)this._square[o][0]=this._originalSquare[o][0]-r[0],this._square[o][1]=this._originalSquare[o][1]-r[1];var a=[];if(this._euclideanDistance(e,this._square[0])<this.depth)for(var u=0;u<4;u++)a.push(e);else a.push(this._distanceDownLine(this._square[0],e,this.depth)),a.push([this._calculateIntersection(this._square[1],e,!0,a[0][1]),a[0][1]]),a.push([a[1][0],this._calculateIntersection(this._square[2],e,!1,a[1][0])]),a.push([this._calculateIntersection(this._square[3],e,!0,a[2][1]),a[2][1]]),this._context.beginPath(),this._context.moveTo(a[a.length-1][0],a[a.length-1][1]),a.forEach(function(e){return t._context.lineTo(e[0],e[1])}),this._context.stroke(),this._context.closePath();this._square.forEach(function(n,i){t._context.beginPath(),t._context.moveTo(n[0],n[1]),t._context.lineTo(a[i][0],a[i][1]),t._context.stroke(),t._context.closePath(),t._context.beginPath(),t._context.moveTo(a[i][0],a[i][1]),t._context.setLineDash([0,4,t.lineWeight,4]),t._context.lineTo(e[0],e[1]),t._context.stroke(),t._context.closePath(),t._context.setLineDash([])}),this._drawSquareOnContext()}},{key:"_drawSquareOnContext",value:function(){var e=this;this._context.beginPath(),this._context.moveTo(this._square[this._square.length-1][0],this._square[this._square.length-1][1]),this._square.forEach(function(t){return e._context.lineTo(t[0],t[1])}),this._context.stroke(),this._context.closePath}},{key:"_calculateIntersection",value:function(e,t,n,i){return n?(t[0]-e[0])*(i-e[1])/(t[1]-e[1])+e[0]:(t[1]-e[1])*(i-e[0])/(t[0]-e[0])+e[1]}},{key:"_distanceDownLine",value:function(e,t,n){var i=t[1]-e[1],r=t[0]-e[0],s=this._euclideanDistance(e,t),o=r-r*(s-n)/s,a=i-i*(s-n)/s;return[e[0]+o,e[1]+a]}},{key:"_euclideanDistance",value:function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}}]),e}(),width=window.innerWidth,height=window.innerHeight,canvas=document.getElementById("perspective");canvas.setAttribute("width",width),canvas.setAttribute("height",height);var container=document.getElementById("perspective"),perspective=new PerspectiveSquare(canvas,[.4*width,.4*height],.2*Math.min(width,height));perspective.lineColor="#111",perspective.background="#CCB255",container.addEventListener("mousemove",function(e){return perspective.drawSquare([e.offsetX,e.offsetY])});