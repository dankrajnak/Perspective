function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e,t,n){function i(e,t){return typeof e===t}function r(e){var t=x.className,n=A._config.classPrefix||"";if(b&&(t=t.baseVal),A._config.enableJSClass){var i=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(i,"$1"+n+"js$2")}A._config.enableClasses&&(t+=" "+n+e.join(" "+n),b?x.className.baseVal=t:x.className=t)}function a(e,t){if("object"==typeof e)for(var n in e)q(e,n)&&a(n,e[n]);else{var i=(e=e.toLowerCase()).split("."),s=A[i[0]];if(2==i.length&&(s=s[i[1]]),void 0!==s)return A;t="function"==typeof t?t():t,1==i.length?A[i[0]]=t:(!A[i[0]]||A[i[0]]instanceof Boolean||(A[i[0]]=new Boolean(A[i[0]])),A[i[0]][i[1]]=t),r([(t&&0!=t?"":"no-")+i.join("-")]),A._trigger(e,t)}return A}function s(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):b?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function o(){var e=t.body;return e||(e=s(b?"svg":"body"),e.fake=!0),e}function u(e,n,i,r){var a,u,l,c,h="modernizr",d=s("div"),f=o();if(parseInt(i,10))for(;i--;)l=s("div"),l.id=r?r[i]:h+(i+1),d.appendChild(l);return a=s("style"),a.type="text/css",a.id="s"+h,(f.fake?f:d).appendChild(a),f.appendChild(d),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),d.id=h,f.fake&&(f.style.background="",f.style.overflow="hidden",c=x.style.overflow,x.style.overflow="hidden",x.appendChild(f)),u=n(d,e),f.fake?(f.parentNode.removeChild(f),x.style.overflow=c,x.offsetHeight):d.parentNode.removeChild(d),!!u}function l(e,t){return!!~(""+e).indexOf(t)}function c(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function h(t,n,i){var r;if("getComputedStyle"in e){r=getComputedStyle.call(e,t,n);var a=e.console;null!==r?i&&(r=r.getPropertyValue(i)):a&&a[a.error?"error":"log"].call(a,"getComputedStyle returning null, its possible modernizr test results are inaccurate")}else r=!n&&t.currentStyle&&t.currentStyle[i];return r}function d(t,i){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(c(t[r]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var a=[];r--;)a.push("("+c(t[r])+":"+i+")");return a=a.join(" or "),u("@supports ("+a+") { #modernizr { position: absolute; } }",function(e){return"absolute"==h(e,null,"position")})}return n}function f(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function p(e,t,r,a){function o(){c&&(delete L.style,delete L.modElem)}if(a=!i(a,"undefined")&&a,!i(r,"undefined")){var u=d(e,r);if(!i(u,"undefined"))return u}for(var c,h,p,_,m,v=["modernizr","tspan","samp"];!L.style&&v.length;)c=!0,L.modElem=s(v.shift()),L.style=L.modElem.style;for(p=e.length,h=0;p>h;h++)if(_=e[h],m=L.style[_],l(_,"-")&&(_=f(_)),L.style[_]!==n){if(a||i(r,"undefined"))return o(),"pfx"!=t||_;try{L.style[_]=r}catch(e){}if(L.style[_]!=m)return o(),"pfx"!=t||_}return o(),!1}function _(e,t){return function(){return e.apply(t,arguments)}}function m(e,t,n){var r;for(var a in e)if(e[a]in t)return!1===n?e[a]:(r=t[e[a]],i(r,"function")?_(r,n||t):r);return!1}function v(e,t,n,r,a){var s=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+E.join(s+" ")+s).split(" ");return i(t,"string")||i(t,"undefined")?p(o,t,r,a):(o=(e+" "+T.join(s+" ")+s).split(" "),m(o,t,n))}function g(e,t,i){return v(e,n,n,t,i)}var w=[],y={_version:"3.5.0",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){w.push({name:e,fn:t,options:n})},addAsyncTest:function(e){w.push({name:null,fn:e})}},A=function(){};A.prototype=y,A=new A;var C=[],x=t.documentElement,b="svg"===x.nodeName.toLowerCase(),S="Moz O ms Webkit",T=y._config.usePrefixes?S.toLowerCase().split(" "):[];y._domPrefixes=T;var k=y._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];y._prefixes=k;var q;!function(){var e={}.hasOwnProperty;q=i(e,"undefined")||i(e.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(t,n){return e.call(t,n)}}(),y._l={},y.on=function(e,t){this._l[e]||(this._l[e]=[]),this._l[e].push(t),A.hasOwnProperty(e)&&setTimeout(function(){A._trigger(e,A[e])},0)},y._trigger=function(e,t){if(this._l[e]){var n=this._l[e];setTimeout(function(){var e;for(e=0;e<n.length;e++)(0,n[e])(t)},0),delete this._l[e]}},A._q.push(function(){y.addTest=a});var P=function(){var e=!("onblur"in t.documentElement);return function(t,i){var r;return!!t&&(i&&"string"!=typeof i||(i=s(i||"div")),t="on"+t,!(r=t in i)&&e&&(i.setAttribute||(i=s("div")),i.setAttribute(t,""),r="function"==typeof i[t],i[t]!==n&&(i[t]=n),i.removeAttribute(t)),r)}}();y.hasEvent=P;var M=function(){var t=e.matchMedia||e.msMatchMedia;return t?function(e){var n=t(e);return n&&n.matches||!1}:function(t){var n=!1;return u("@media "+t+" { #modernizr { position: absolute; } }",function(t){n="absolute"==(e.getComputedStyle?e.getComputedStyle(t,null):t.currentStyle).position}),n}}();y.mq=M;y.prefixedCSSValue=function(e,t){var n=!1,i=s("div").style;if(e in i){var r=T.length;for(i[e]=t,n=i[e];r--&&!n;)i[e]="-"+T[r]+"-"+t,n=i[e]}return""===n&&(n=!1),n};var E=y._config.usePrefixes?S.split(" "):[];y._cssomPrefixes=E;var F={elem:s("modernizr")};A._q.push(function(){delete F.elem});var L={style:F.elem.style};A._q.unshift(function(){delete L.style}),y.testAllProps=v,y.testAllProps=g,y.testProp=function(e,t,i){return p([e],n,t,i)},y.testStyles=u,A.addTest("customelements","customElements"in e),A.addTest("history",function(){var t=navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone")||"file:"===location.protocol)&&(e.history&&"pushState"in e.history)}),A.addTest("pointerevents",function(){var e=!1,t=T.length;for(e=A.hasEvent("pointerdown");t--&&!e;)P(T[t]+"pointerdown")&&(e=!0);return e}),A.addTest("postmessage","postMessage"in e),A.addTest("webgl",function(){var t=s("canvas"),n="probablySupportsContext"in t?"probablySupportsContext":"supportsContext";return n in t?t[n]("webgl")||t[n]("experimental-webgl"):"WebGLRenderingContext"in e});var O=!1;try{O="WebSocket"in e&&2===e.WebSocket.CLOSING}catch(e){}A.addTest("websockets",O),A.addTest("cssanimations",g("animationName","a",!0)),function(){A.addTest("csscolumns",function(){var e=!1,t=g("columnCount");try{(e=!!t)&&(e=new Boolean(e))}catch(e){}return e});for(var e,t,n=["Width","Span","Fill","Gap","Rule","RuleColor","RuleStyle","RuleWidth","BreakBefore","BreakAfter","BreakInside"],i=0;i<n.length;i++)e=n[i].toLowerCase(),t=g("column"+n[i]),("breakbefore"===e||"breakafter"===e||"breakinside"==e)&&(t=t||g(n[i])),A.addTest("csscolumns."+e,t)}(),A.addTest("flexbox",g("flexBasis","1px",!0)),A.addTest("picture","HTMLPictureElement"in e),A.addAsyncTest(function(){var e,t,n,i=s("img"),r="sizes"in i;!r&&"srcset"in i?(t="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",e="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",n=function(){a("sizes",2==i.width)},i.onload=n,i.onerror=n,i.setAttribute("sizes","9px"),i.srcset=e+" 1w,"+t+" 8w",i.src=e):a("sizes",r)}),A.addTest("srcset","srcset"in s("img")),A.addTest("webworkers","Worker"in e),function(){var e,t,n,r,a,s,o;for(var u in w)if(w.hasOwnProperty(u)){if(e=[],(t=w[u]).name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=i(t.fn,"function")?t.fn():t.fn,a=0;a<e.length;a++)s=e[a],1===(o=s.split(".")).length?A[o[0]]=r:(!A[o[0]]||A[o[0]]instanceof Boolean||(A[o[0]]=new Boolean(A[o[0]])),A[o[0]][o[1]]=r),C.push((r?"":"no-")+o.join("-"))}}(),r(C),delete y.addTest,delete y.addAsyncTest;for(var W=0;W<A._q.length;W++)A._q[W]();e.Modernizr=A}(window,document);var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),PerspectiveSquare=function(){function e(t,n,i){_classCallCheck(this,e),this._canvas=t,this._context=this._canvas.getContext("2d"),this._originalSquare=[n,[n[0]+i,n[1]],[n[0]+i,n[1]+i],[n[0],n[1]+i]],this._squareCenter=[n[0]+i/2,n[1]+i/2],this._square=this._originalSquare.map(function(e){return e.slice()}),this.depth=100,this.lineColor="black",this.background="white",this.lineWeight=3,this.maxSquareDisplacement=60}return _createClass(e,[{key:"drawSquare",value:function(e){var t=this,n=this._canvas.width,i=this._canvas.height;this._context.clearRect(0,0,n,i,this.background),this._context.fillStyle=this.background,this._context.fillRect(0,0,n,i),this._context.lineWidth=this.lineWeight;var r=[0,0],a=Math.min(this._euclideanDistance(this._squareCenter,e),this.maxSquareDisplacement);(r=this._distanceDownLine(this._squareCenter,e,a))[0]-=this._squareCenter[0],r[1]-=this._squareCenter[1];for(var s=0;s<4;s++)this._square[s][0]=this._originalSquare[s][0]-r[0],this._square[s][1]=this._originalSquare[s][1]-r[1];var o=[];if(this._euclideanDistance(e,this._square[0])<this.depth)for(var u=0;u<4;u++)o.push(e);else o.push(this._distanceDownLine(this._square[0],e,this.depth)),o.push([this._calculateIntersection(this._square[1],e,!0,o[0][1]),o[0][1]]),o.push([o[1][0],this._calculateIntersection(this._square[2],e,!1,o[1][0])]),o.push([this._calculateIntersection(this._square[3],e,!0,o[2][1]),o[2][1]]),this._context.beginPath(),this._context.moveTo(o[o.length-1][0],o[o.length-1][1]),o.forEach(function(e){return t._context.lineTo(e[0],e[1])}),this._context.stroke(),this._context.closePath();this._square.forEach(function(n,i){t._context.beginPath(),t._context.moveTo(n[0],n[1]),t._context.lineTo(o[i][0],o[i][1]),t._context.stroke(),t._context.closePath(),t._context.beginPath(),t._context.moveTo(o[i][0],o[i][1]),t._context.setLineDash([0,4,t.lineWeight,4]),t._context.lineTo(e[0],e[1]),t._context.stroke(),t._context.closePath(),t._context.setLineDash([])}),this._drawSquareOnContext()}},{key:"_drawSquareOnContext",value:function(){var e=this;this._context.beginPath(),this._context.moveTo(this._square[this._square.length-1][0],this._square[this._square.length-1][1]),this._square.forEach(function(t){return e._context.lineTo(t[0],t[1])}),this._context.stroke(),this._context.closePath}},{key:"_calculateIntersection",value:function(e,t,n,i){return n?(t[0]-e[0])*(i-e[1])/(t[1]-e[1])+e[0]:(t[1]-e[1])*(i-e[0])/(t[0]-e[0])+e[1]}},{key:"_distanceDownLine",value:function(e,t,n){var i=t[1]-e[1],r=t[0]-e[0],a=this._euclideanDistance(e,t),s=r-r*(a-n)/a,o=i-i*(a-n)/a;return[e[0]+s,e[1]+o]}},{key:"_euclideanDistance",value:function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}}]),e}(),Wanderer=function(){function e(t,n){_classCallCheck(this,e),this.width=t,this.height=n,this._wanderToFromStart=null,this._animationFrame,this._wandering=!1,this._alpha=3,this._distanceFromToToFrom,this._delay}return _createClass(e,[{key:"startWandering",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[Math.random()*this.width,Math.random()*this.height];this._wandering=!0,this._delay=n,this.wanderToFrom([Math.random()*this.width,Math.random()*this.height],i,t,e)}},{key:"stopWandering",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._wandering=!1,e&&(window.cancelAnimationFrame(this._animationFrame),this._wanderToFromStart=null)}},{key:"wanderToFrom",value:function(e,t,n,i){var r=this;this._alpha=4*Math.random()+1|0,this._distanceFromToToFrom=this._euclideanDistance(e,t),this._animationFrame=window.requestAnimationFrame(function(a){return r._step(e,t,n,i,a)})}},{key:"_step",value:function(e,t,n,i,r){var a=this;this._wanderToFromStart||(this._wanderToFromStart=r);var s=r-this._wanderToFromStart;i(this._interpolate(e,t,Math.min(1,s/n))),s<n?this._animationFrame=window.requestAnimationFrame(function(r){return a._step(e,t,n,i,r)}):(this._wanderToFromStart=null,this._wandering&&(this._delay>0?setTimeout(function(){return a.wanderToFrom([Math.random()*a.width,Math.random()*a.height],e,n,i)},this._delay):this.wanderToFrom([Math.random()*this.width,Math.random()*this.height],e,n,i)))}},{key:"_interpolate",value:function(e,t,n){return this._distanceDownLine(t,e,this._distanceFromToToFrom*this._easeInOut(n))}},{key:"_easeInOut",value:function(e){return Math.pow(e,this._alpha)/(Math.pow(e,this._alpha)+Math.pow(1-e,this._alpha))}},{key:"_distanceDownLine",value:function(e,t,n){var i=t[1]-e[1],r=t[0]-e[0];if(0==i&&0==r)return e;var a=this._euclideanDistance(e,t),s=r-r*(a-n)/a,o=i-i*(a-n)/a;return[e[0]+s,e[1]+o]}},{key:"_euclideanDistance",value:function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}}]),e}(),width=window.innerWidth,height=window.innerHeight,canvas=document.getElementById("perspective");canvas.setAttribute("width",width),canvas.setAttribute("height",height);var perspective=new PerspectiveSquare(canvas,[.4*width,.4*height],.2*Math.min(width,height));perspective.lineColor="#111",perspective.background="#CCB255";var wanderer=new Wanderer(width,height);wanderer.startWandering(function(e){return perspective.drawSquare(e)},2e3,500),canvas.addEventListener("mouseover",function(e){return wanderer.stopWandering(!0)}),canvas.addEventListener("mousemove",function(e){return perspective.drawSquare([e.offsetX,e.offsetY])}),canvas.addEventListener("mouseout",function(e){return wanderer.startWandering(function(e){return perspective.drawSquare(e)},2e3,500,[e.offsetX,e.offsetY])});